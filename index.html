<!DOCTYPE html>
<html>
<head>
  <title>A Meaningful Page Title</title>
  <link rel="stylesheet" href="style2.css">
  <style>
    /* Add this CSS rule to hide the submenu by default */
    #subnav-div {
      display: none;
    }
  </style>
</head>
<body>

<!--start maindiv-->
<div id="main-div" class="clearfix">
  <!--start leftside div-->
  <div id="leftside-div"> 
    LeftSide
    <!--start of navbar div-->
    <div id="navbar-div">
      <ul>
        <!-- Start of File Submenu -->
        <li id="file-menu-container">
          <a href="#">File</a>
          <!-- Add the submenu-div inside the list item -->
          <div class="submenu-div">
            <div class="submenu-file-div">
              <a href="#" onclick="loadCSVFile();">Load CSV file</a>
              <a href="#" onclick="loginToDB();">Login to DB</a>
              <a href="#" onclick="confirmLogout();">Logout DB</a>
              <a href="#" onclick="exit();">Exit</a> <!-- Added Exit option -->
            </div>
          </div>
        </li>
        <!-- End of File Submenu -->
  
        <!--End of File Submenu-->

        <!--Start of View Submenu-->
        <li id="view-menu-container">
          <a href="#">View</a>
          <div id="view-subnav-div">
            <div class="submenu-view-div">
              <a href="#" onclick="runGraph('Bar');">Bar</a>
              <a href="#" onclick="runGraph('Line');">Line</a>
              <a href="#" onclick="runGraph('Pie');">Pie</a>
            </div>
            <!--end of submenu view div-->
          </div>
          <!--end of view subnav div-->
        </li>
        <!--End of View Submenu-->

        <!--Start of Setting Submenu-->
        <li id="setting-menu-container">
          <a href="#">Setting</a>
          <div id="setting-subnav-div">
            <div class="submenu-setting-div">
              <a href="#">User Info</a>
            </div>
            <!--end of submenu setting div-->
          </div>
        </li>
        <!--End of Setting Submenu-->

        <!--Start of Help Submenu-->
        <li id="help-menu-container">
          <a href="#">Help</a>
          <div id="help-subnav-div">
            <div class="submenu-help-div">
              <a href="#">Info</a>
              <a href="#">Client</a>
            </div>
          </div>
        </li>
        <!--End of Help Submenu-->
      </ul>
    </div>
    <!--end of navbar div-->
  </div> 
  <!--leftside end of div-->

  <!--start of righttop div-->
  <div id="righttop-div">
    This is a graph
  </div>
  <!--end of righttop div-->

  <!--start of rightbottom div-->
  <div id="rightbottom-div">
    <div id="message-area"></div>
    <table id="csv-table"></table>

    <!-- Add data selection area -->
    <div id="data-selection">
      <p>Please select one of the following choices, and then run one of the graphs in the View menu. Note: The empty, NULL, or NaN values will be excluded.</p>
      <label for="avgWages">AvgWages (Bar, Line)</label>
<input type="radio" id="avgWages" name="data" value="avgWages">
<label for="estimatedPopulation">EstimatedPopulation (Bar, Line)</label>
<input type="radio" id="estimatedPopulation" name="data" value="estimatedPopulation"> <!-- Fix the type attribute -->
<label for="state">State (Bar, Pie)</label>
<input type="radio" id="state" name="data" value="state">

    </div>
  </div>
  <!--end of rightbottom div-->
</div>
<!--end of maindiv-->

<!-- Hidden input element for file selection -->
<input type="file" id="csvFileInput" style="display: none;">

<script>
  // Function to handle opening the file input dialog
  function loadCSVFile() {
    document.getElementById('csvFileInput').click();
  }
  
  // Function to handle CSV file selection and loading
  document.getElementById('csvFileInput').addEventListener('change', function(event) {
    const file = event.target.files[0];
    if (file) {
      const reader = new FileReader();

      reader.onload = function(e) {
        const csvData = e.target.result;
        // Process the CSV data here.
      };

      reader.readAsText(file);
    }
  });

  // Function to handle DB login
  function loginToDB() {
    // Prompt the user for login and password
    const login = prompt("Enter login:");
    const password = prompt("Enter password:");

    // Simulate database verification (you should replace this with an actual AJAX request)
    if (login === "sampleuser" && password === "samplepassword") {
      // Successful login
      const messageDiv = document.getElementById('message-area');
      messageDiv.textContent = "Welcome, " + login;
      
      // Store user information in the browser (you can use localStorage or sessionStorage)
      sessionStorage.setItem("user", login);
    } else {
      // Failed login
      const messageDiv = document.getElementById('message-area');
      messageDiv.textContent = "Login failed. Please try again.";
    }
  }

  // Function to confirm logout
  function confirmLogout() {
    // Ask the user to confirm logout
    const confirmLogout = confirm("Are you sure you want to logout?");

    if (confirmLogout) {
      // Clear user information from the browser
      sessionStorage.removeItem("user");

      // Display "Successful logout" message
      const messageDiv = document.getElementById('message-area');
      messageDiv.textContent = "Successful logout";
    }
  }

  // Function to exit and close the current tab or window
  function exit() {
    // Clean any memory or resources here (if needed)
    
    // Close the current browser tab or window
    window.close();
  }

  // Function to handle running the selected graph
  function runGraph(graphType) {
    const selectedData = document.querySelector('input[name="data"]:checked');

    if (!selectedData) {
      alert("Please select a data type first.");
      return;
    }

    const data = selectedData.value;

    // Here, you can use the 'data' variable to determine which graph type to generate based on the selected data.
    if (data === "avgWages") {
      // Generate the graph for AvgWages
      // Example: generateBarGraph(graphType);
    } else if (data === "estimatedPopulation") {
      // Generate the graph for EstimatedPopulation
      // Example: generateLineGraph(graphType);
    } else if (data === "state") {
      // Generate the graph for State
      // Example: generatePieChart(graphType);
    }
  }
</script>

</body>
</html>
